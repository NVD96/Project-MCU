		 ORG 00H
		 LJMP NGAT
		 ORG 1BH		 ; CHU Y DIA CHI VECTOR NGAT CUA TIMER 1
		 LCALL HIENTHI
		 ORG 30H
		 MOV TMOD, #11H			; TIMER 0 MODE 16BIT//////TIMER 1 MODE 8 BIT TU NAP LAI
NGAT:
		 SETB IE.7  			; CHO PHEP SU DUNG NGAT
		 SETB IE.3				; DUNG NGAT TIMER 1
		 MOV TH1, #HIGH(-100)				
		 MOV TL1, #LOW(-100)	; NAP 100 MICROSECOND 
		 SETB TR1	  			; BAT DAU DEM
;		 MOV R7, #255
		 MOV R6, #10	
MAIN:
		CALL DOC				; QUA TRINH DOC TU CAM BIEN 
		CALL CONVER				; QUA TRINH XUAT RA P2
		CALL DELAY
		SJMP MAIN
DOC:
		CLR P1.0
		SETB P1.1
		CLR P1.2
		NOP
		SETB P1.2
DOI:
		JNB P1.3, DOI
VIET:
		CLR P1.0
		CLR P1.1
		MOV 20H, P2
		RET 
CONVER:
		MOV B, #2		  ; TINH TOAN CHUYEN DOI HIEN THI 7SEG
		MOV A, 20H
		DIV AB
	   	MOV B, #100
		DIV AB
		MOV A, B
		MOV B, #10
		DIV AB
		MOV 30H, A
		MOV 31H, B 
		RET
HIENTHI:
		CLR TR1
HIENTHI1:					; CHUONG TRINH NGAT
		MOV DPTR, #MALED1
		MOV A, 31H
		MOVC A, @A+DPTR
		MOV P3, A
		SETB P1.5
		CALL DELAY
		CLR P1.5
		CLR P1.6
		MOV A, 30H
		MOVC A, @A+DPTR
		MOV P3, A
		SETB P1.6
		CALL DELAY
		CLR P1.6
		CLR P1.5
		DJNZ R6, HIENTHI1
		MOV TH1, #HIGH(-100)
		MOV TL1, #LOW(-100) 
		SETB TR1
		RETI
;DELAY1:
;		CALL DELAY
;		DJNZ R7, DELAY1
;		RET

DELAY:
		MOV TH0, #HIGH(-100)
		MOV TL0, #LOW(-100)
		SETB TR0
		JNB TF0, $
		CLR TR0
		CLR TF0
		RET
		ORG 350H
MALED1:
		DB 0C0H, 0F9H, 0A4H, 0B0H, 99H, 92H, 82H, 0F8H, 80H, 90H
		END
		; CHU Y PHAN DELAY KHONG DC NHANH QUA///NEU NHANH QUA THI MO PHONG KHONG CHAY THEO KIP
		; SU DUNG NGAT DE TANG KHA NANG HIEN THI
		; CAN CHINH THOI GIAN HOP LY DE CHAY MO PHONG
		; DUNG NGAT THI DAP UNG CHO LED7-SEG NHANH HON RAT NHIEU