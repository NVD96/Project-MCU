		ORG 0
		MOV TMOD, #01
		MOV R7, #1
		MOV R3, #99
MAIN:
		CALL HEX_BCD
		CALL BCD_7SEG
		MOV R2, #255
LAP:
		CALL HIENTHI
;		INC R3
		DJNZ R2, LAP
		SJMP MAIN
HEX_BCD:
		MOV A, R3
		MOV B, #10
		DIV AB
		MOV 10H, B
		MOV 11H, A
		RET
BCD_7SEG:
		MOV R0, #10H
		MOV R1, #20H
		MOV DPTR, #MALED7
GIAIMA:	
		MOV A, @R0
		MOVC A, @A+DPTR
		MOV @R1, A
		INC R0
		INC R1
		CJNE R0, #12H, GIAIMA
		RET
HIENTHI:
		MOV R1, #20H
		MOV A, #2
NAP:
		MOV P1, @R1
		MOV P2, A
		CALL DELAY1
		MOV P2, #0
		INC R1
		RL A
		CJNE A, #8, NAP
		RET 
DELAY1:
		MOV TH0, #HIGH(-10)
		MOV TL0, #LOW(-10)
		SETB TR0
		JNB TF0, $
		CLR TR0
		CLR TF0
		RET
MALED7:
	DB 0C0H, 0F9H, 0A4H, 0B0H, 99H, 92H, 82H, 0F8H, 80H, 90H			; 88H, 83H, 0C6H, 0A1H, 86H, 8EH, 0BFH
		END